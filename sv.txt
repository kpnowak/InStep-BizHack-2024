app.post('/', (req, res) => {
  let { hobbies, groceries } = req.body;

  // Log the received data
  console.log('Received Survey Data:');
  console.log('Hobbies:', hobbies);
  console.log('Groceries:', groceries);
  console.log('Hobbies Type:', typeof hobbies);
  console.log('Groceries Type:', typeof groceries);

  // Convert hobbies and groceries to arrays if they are strings
  if (typeof hobbies === 'string') {
    hobbies = hobbies.split(',').map(item => item.trim());
  }
  if (typeof groceries === 'string') {
    groceries = groceries.split(',').map(item => item.trim());
  }

  // If the fields are empty strings, convert them to empty arrays
  hobbies = hobbies.filter(item => item);
  groceries = groceries.filter(item => item);

  // Create an object to store the data
  const surveyData = {
    hobbies,
    groceries
  };

  // Define the path to the file
  const filePath = path.join(__dirname, 'survey_data.json');

  // Write JSON data to a file
  fs.writeFile(filePath, JSON.stringify(surveyData, null, 2), (err) => {
    if (err) {
      console.error('Error writing to file', err);
      return res.status(500).send('Error saving survey data');
    } else {
      console.log(`File saved successfully to ${filePath}`);
      res.status(200).send('Survey data received and saved to JSON file.');
    }
  });
});